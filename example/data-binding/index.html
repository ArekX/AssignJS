<!DOCTYPE html>
<html>
<head>
    <title>Two way databinding example</title>
</head>
<body>
<h1>Two way databinding example</h1>

<div data-assign="app.main">
    Two way data binding:
    <div>
        Input 1:
        <input data-assign="#data" type="text" />
    </div>

    <div>
        Input 2:
        <input data-assign="#data" type="text" />
    </div>

    <p>Data bound result: <span data-assign="@data"></span></p>

    <select data-assign="#data" data-assign-options="@items -> html">
        <option value="value1"> Value 1</option>
        <option value="someValue_2">Value 2</option>
        <option value="value3">Value 3</option>
        <option value="Hello">Hello</option>
        <option value="Hello World">Hello World</option>
    </select>

    <textarea data-assign="#data"></textarea>
    <input type="checkbox" data-assign="#data -> checkSwitch:change" value="Hello" />
    <input type="radio" data-assign="#data -> checkSwitch:change" value="Hello" />
    <input type="radio" data-assign="#data -> checkSwitch:change" value="Hello World" />
    <div>
        <button data-assign=":button1" data-value="Hello">Set data to "Hello"</button><br>
        <button data-assign=":button2" data-value="Hello World">Set data to "Hello World"</button><br>
        <button data-assign=":clear">Clear data</button><br>
    </div>
</div>

<script src="../../build/assignjs.js"></script>
<script>
AssignJS.modules.extend("core.components", function() {
    var module = this.module;
    var html = AssignJS.html;

    module.define("app.main", AppMain);

    function AppMain() {}

    AppMain.prototype.initialize = function() {
        this.props.set("data", "");
        this.props.set("items", [
            html.create('option', 'World!', {attributes: {value: 'Hello'}}),
            html.create('option', 'Ojha!', {attributes: {value: 'ojha'}}),
        ]);
    };

    AppMain.prototype.afterInit = function() {
        var button1 = this.scope.get("button1");
        var button2 = this.scope.get("button2");
        var clear = this.scope.get("clear");

        button1.onclick = button2.onclick = (e) => {
            this.props.set("data", e.target.dataset.value);
        };

        clear.onclick = () => {
            this.props.set("data", "");
        };
    }
});
AssignJS.run();
</script>
</body>
</html>