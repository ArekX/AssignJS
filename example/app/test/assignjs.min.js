/*! assignjs 1.0.0 by Aleksandar Panic. License: MIT */
!function(e){"use strict";var t=e.dataset.nameAs||"AssignJS",n=[];function r(){}return r.prototype.throwError=function(e,t){var n={message:e};for(var r in t=t||{})t.hasOwnProperty(r)&&(n[r]=t[r]);throw n.toString=function(){return e},n},r.prototype.addRunnable=function(e){n.push(e)},r.prototype.run=function(){for(var e=0;e<n.length;e++)n[e]()},e.setAttribute("data-assign-js-core",t),window[t]=e.$main=new r}(document.body.querySelector("script:last-child")),function(e){"use strict";var t={}.constructor;function n(){}return n.prototype.merge=function(){var e={},t=arguments;if(1===t.length)return t[0];var n=!0;if(this.isBoolean(t[0])){n=t[0],t=[];for(var r=1;r<arguments.length;r++)t.push(arguments[r])}if(0===t.length)return{};for(var r=0;r<t.length;r++)e=s(e,t[r]);return e;function s(t,r){var i=t;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o],p=t[o];p="object"==typeof a&&null!==a&&a.constructor===e.constructor&&"object"==typeof p&&null!==p&&p.constructor===e.constructor&&n?s(p,a):a,i[o]=p}return i}},n.prototype.clone=function(e){var t=[],n=function e(n){var s={};if(-1!==t.indexOf(n))return!1;t.push(n);for(var i in n)if(n.hasOwnProperty(i))if(r(n[i])){var o=e(n[i]);if(!1===o)continue;s[i]=o}else s[i]=n[i];return s}(e);return 0==n?{}:n},n.prototype.parseJson=function(e,t){t=this.defaultValue(t,null);try{return $.parseJSON(e)}catch(e){return t}},n.prototype.defaultValue=function(e,t){return this.isDefined(e)?e:t},n.prototype.getValue=function(e,t,n){if(t in e)return e[t];var r=e;varparts=t.split(".");for(var s=0;s<varparts.length;s++){if(!(varparts[s]in r))return n;r=r[varparts[s]]}if(!this.isDefined(r))return n;return r},n.prototype.isEmpty=function(e){return!this.isFunction(e)},n.prototype.isObject=r,n.prototype.isPlainObject=function(e){return this.isObject(e)&&t===e.constructor},n.prototype.isNumber=function(e){return"number"==typeof e},n.prototype.isString=function(e){return"string"==typeof e},n.prototype.isDefined=function(e){return void 0!==e},n.prototype.isBoolean=function(e){return"boolean"==typeof e},n.prototype.isFunction=function(e){return"function"==typeof e},n.prototype.isArray=function(e){return this.isObject(e)&&e.constructor===Array},n.prototype.forceInt=function(e,t,n){n=this.defaultValue(n,10);var e=parseInt(e,n);return isNaN(e)?t:e},n.prototype.forceFloat=function(e,t){var e=parseFloat(e);return isNaN(e)?t:e},n.prototype.extendPrototype=function(e,t,n){var r=Object.create(e,n);for(var s in r.super={},t)t.hasOwnProperty(s)&&(s in r&&(r.super[s]=r[s]),r[s]=t[s]);return r},void(e.vars=new n);function r(e){return"object"==typeof e}}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(){this._namespaceRegex=/^([a-zA-Z0-9-]+)(\.([a-zA-Z0-9-]+))+$/}t.prototype.namespaceValid=function(e,t,n){null===e.match(this._namespaceRegex)&&s(t,"Namespace is not valid.",n,{namespace:e})},t.prototype.keyNotSet=function(e,t,n,r){e in t&&s(n,"Key is already set in object.",r,{key:e,object:t})},t.prototype.keySet=function(e,t,n,r){e in t||s(n,"Key is not set in object.",r,{key:e,object:t})},t.prototype.ownKeySet=function(e,t,n,r){t.hasOwnProperty(e)||s(n,"Key is not set in object.",r,{key:e,object:t})},t.prototype.ownKeyNotSet=function(e,t,n,r){t.hasOwnProperty(e)&&s(n,"Key is already set in object.",r,{key:e,object:t})},t.prototype.equals=function(e,t,n,i){r([e,t],!1)||s(n,"Values are not equal.",i,{checkA:e,checkB:t})},t.prototype.greater=function(e,t,n,r){e<=t&&s(n,"Second value is greater than first.",r,{checkA:e,checkB:t})},t.prototype.less=function(e,t,n,r){e>=t&&s(n,"Second value is less than first.",r,{checkA:e,checkB:t})},t.prototype.greaterOrEqual=function(e,t,n,r){e<t&&s(n,"Second value is greater than first.",r,{checkA:e,checkB:t})},t.prototype.lessOrEqual=function(e,t,n,r){e>t&&s(n,"Second value is less than first.",r,{checkA:e,checkB:t})},t.prototype.notEquals=function(e,t,n,i){r([e,t],!1)&&s(n,"Values are equal.",i,{checkA:e,checkB:t})},t.prototype.identical=function(e,t,n,i){r([e,t],!0)||s(n,"Values are not identical.",i,{checkA:e,checkB:t})},t.prototype.notIdentical=function(e,t,n,i){r([e,t],!0)&&s(n,"Values are identical.",i,{checkA:e,checkB:t})},t.prototype.isTrue=function(e,t,n){!0!==e&&s(t,"Value is not true.",n,{value:e})},t.prototype.isFalse=function(e,t,n){!1!==e&&s(t,"Value is not false.",n,{value:e})},t.prototype.isString=function(e,t,r){n.isString(e)||s(t,"Value is not string.",r,{value:e})},t.prototype.isObject=function(e,t,r){n.isObject(e)||s(t,"Value is not an object.",r,{value:e})},t.prototype.isDefined=function(e,t,r){n.isDefined(e)||s(t,"Value is not defined.",r,{value:e})},t.prototype.isUndefined=function(e,t,r){n.isDefined(e)&&s(t,"Value is defined.",r,{value:e})},t.prototype.isArray=function(e,t,r){n.isArray(e)||s(t,"Value is not an array.",r,{value:e})};var n=e.vars;return void(e.assert=new t);function r(e,t){for(var n=1;n<e.length;n++){if(t&&e[n]!==e[0])return!1;if(e[n]!=e[0])return!1}return!0}function s(t,n,r,s){e.throwError(t||n,r||s)}}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(e){this.target=e}t.prototype.set=function(e,t){n.keyNotSet(e,this.target,"This alias is already set!",{alias:e,callback:t}),this.target[e]=t};var n=e.assert;return e.do={},void(e.alias=new t(e.do))}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(){this._modules={},this._definitions={},this._runnables={},this._extensions={},this.initialized=!1}t.prototype.define=function(e,t,n){r.namespaceValid(e),r.keyNotSet(e,this._definitions,"This module is already defined."),n||(n=t);n.deps=n.deps||t,this._definitions[e]=n},t.prototype.extend=function(e,t,n){e in this._extensions||(this._extensions[e]=[]);n||(n=t);n.deps=n.deps||t,this._extensions[e].push(n)},t.prototype.defineRunnable=function(e,t){r.namespaceValid(e),r.keyNotSet(e,this._runnables,"This runnable is already defined."),this._runnables[e]=t},t.prototype.get=function(t){this.initialized||e.throwError("Assign JS modules is not initialized!",{namespace:t});if(t in this._modules)return this._modules[t];return this._initializeModule(t)},t.prototype._initializeModule=function(t){r.keySet(t,this._definitions,"Module is not defined.");var n=this._definitions[t],s={core:e,name:t,deps:n.deps},i=this._getModules(n.deps);return s.module=this._modules[t]=n.apply(s,i),this._initializeExtensions(t,s),s.module},t.prototype._initializeExtensions=function(e,t){if(!(e in this._extensions))return;for(var n=0;n<this._extensions[e].length;n++){var r=this._extensions[e][n];r.apply(t,this._getModules(r.deps))}},t.prototype._getModules=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.get(e[n]));return t},t.prototype._runAll=function(){this.initialized=!0,this._initializeAllModules(),this._runRunnables()},t.prototype._runRunnables=function(){for(var e in this._runnables)this._runnables.hasOwnProperty(e)&&this._runnables[e]()},t.prototype._initializeAllModules=function(){for(var e in this._definitions)this._definitions.hasOwnProperty(e)&&this.get(e)};var n=new t,r=e.assert;return e.modules=n,void e.addRunnable(function(){n._runAll()})}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(){}function n(){}n.prototype.contentTypes={TYPE_HTML:"html",TYPE_VALUE:"value"},n.prototype.getContents=function(e,t){if(this.isInputElement(e)&&t!==this.contentTypes.TYPE_HTML)return this.getInputContents(e);if(r.isString(t)&&"["===t[0])return this.getAttributeContents(e,t.substr(1,t.length-2));return this.getHtmlContents(e)},n.prototype.getHtmlContents=function(e){return e.innerHTML},n.prototype.getInputContents=function(e){if(e.options&&e.multiple){for(var t=[],n=0;n<e.options.length;n++){var r=e.options[n];r.selected&&t.push(r.value)}return t}return e.value},n.prototype.getAttributeContents=function(e,t){return e.getAttribute(t)},n.prototype.setContents=function(e,t,n){if(r.isString(n)&&"["===n[0])return this.setAttributeContents(e,t,n.substr(1,n.length-2));if(this.isInputElement(e)&&n!==this.contentTypes.TYPE_HTML)return this.setInputContents(e,t,n);return this.setHtmlContents(e,t)},n.prototype.setAttributeContents=function(e,t,n){n.length>0&&e.setAttribute(n,t);return[]},n.prototype.setHtmlContents=function(e,n){var s=[];r.isString(n)&&(n=this.encode(n),s=this.clearContents(e));n instanceof t&&(n=n.value);if(n instanceof HTMLElement)return 1===e.children.length&&n.parentElement===e?s:(s=this.clearContents(e),e.appendChild(n),s);if(n instanceof HTMLCollection){if(n===e.children)return s;for(s=this.clearContents(e);n.length>0;)e.appendChild(n[0]);return s}if(r.isArray(n)){s=this.clearContents(e);for(var i=!1,o=0;o<n.length;o++){var a=n[o];a instanceof HTMLElement&&(e.appendChild(n[o]),i=!0)}if(i)return s}return e.innerHTML=n,s},n.prototype.setInputContents=function(e,n,s){n instanceof t&&(n=n.value);if(r.isArray(n)&&e.options&&e.multiple){for(var i=0;i<e.options.length;i++)e.options[i].selected=-1!==n.indexOf(e.options[i].value);return[]}return e.value=n,[]},n.prototype.createTemplate=function(e,t,n){var s=this;n=!r.isDefined(n)&&r.isPlainObject(t)?t:r.defaultValue(n,{});return n=r.merge({},n),i.tag=e,i.contents=r.defaultValue(t,null),i.options=n,i;function i(i,o){var a=null;!r.isDefined(o)&&r.isPlainObject(i),r.isDefined(i)&&!r.isPlainObject(i)&&(a=i);var p=r.merge({},n,o);return s.create(e,a||t,p)}},n.prototype.create=function(e,t,n){var s=document.createElement(e);!r.isDefined(n)&&r.isPlainObject(t)&&(n=t);r.isDefined(t)&&!r.isPlainObject(t)&&this.setContents(s,t);n&&this.extend(s,n);return s},n.prototype.extend=function(e,t){if(t.attrs)for(var n in t.attrs)if(t.attrs.hasOwnProperty(n)){var s=n.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});e.setAttribute(s,t.attrs[n])}if(t.events)for(var i in t.events)if(t.events.hasOwnProperty(i)){var o=t.events[i];r.isArray(o)?e.addEventListener.apply(el,[i].concat(o)):e.addEventListener(i,o)}if(t.style){var a="";for(var p in t.style)if(t.style.hasOwnProperty(p)){var c=p.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});a+=c+":"+t.style[p]+";"}e.setAttribute("style",a)}},n.prototype.clearContents=function(e){var t=[];for(;e.firstChild;){var n=e.firstChild;e.removeChild(n),n instanceof HTMLElement&&t.push(n)}return t},n.prototype.encode=function(e){return e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")},n.prototype.wrapRawHtml=function(e){return Object.create(t.prototype,{value:{value:e,writable:!1}})},n.prototype.isInputElement=function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement},n.prototype.parse=function(e,t){var n=r.isString(e)?document.createElement(e):e;return this.setContents(n,r.isString(t)?this.wrapRawHtml(t):t),n};var r=e.vars;return void(e.html=new n)}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(){var t=e.assert,n=/^\s*(\<\-)?\s*([a-zA-Z_@][a-zA-Z0-9\.]*|\(.*?\))(:([a-zA-Z_][a-zA-Z0-9]*))?$/,r=/^[@a-zA-Z_](\.[a-zA-Z0-9]+|[a-zA-Z0-9]+)*$/,s=/^\((.*?)\)$/;function i(){}return i.prototype.parse=function(e){for(var i=this._parseAssignmentItems(e),o=[],a=0;a<i.length;a++){var p=i[a],c=p.split(n);t.identical(c.length,6,"Cannot parse assignment part. Invalid syntax.",{assignments:e,parts:c});var u=c[2].match(r),l=c[2].match(s);t.notIdentical(u,l,"Invalid property.",{assignments:e,parts:c,property:c[2]}),o.push(null!==l?this._parsePartsAsLiteral(c):this._parsePartsAsItem(c))}return o},i.prototype.assignToScope=function(e,t){if(!e)return;for(var n=0;n<e.length;n++){var r=e[n],s="literal"===r.type?r.value:t.getGlobal(r.value);t.set(r.name,s)}},i.prototype._parseAssignmentItems=function(e){var t=[],n=/\(.*?\)(:([a-zA-Z_][a-zA-Z0-9]*))?/,r=null;for(;null!==(r=e.match(n));)t.push(r[0]),e=e.substr(0,r.index)+e.substr(r.index+r[0].length);return e=e.replace(/\,(\s*\,)+/g,",").trim(),t.concat(e.split(",")).filter(function(e){return e.length>0&&"<-"!==e.trim()})},i.prototype._parsePartsAsLiteral=function(n){var r=n[3]?n[4]:null,i=null,o=n[2].split(s),a={parts:n,literal:n[2],split:o};t.identical(o.length,3,"Cannot parse assignment literal. Invalid syntax.",a);try{i=JSON.parse(o[1])}catch(t){e.throwError("Cannot parse assignment literal as JSON value.",a)}return t.isTrue(!!r,"You must provide a reference name when specifying a literal.",{literal:n[2],parts:n}),{type:"literal",value:i,name:r}},i.prototype._parsePartsAsItem=function(e){return{type:"item",value:e[2],name:e[3]?e[4]:e[2]}},new i}e.modules.define("core.assignments",t),t.deps=[]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t,n){function r(){this.events=n(["beforeBootstrap","afterBootstrap"],this)}r.prototype.run=function(){if(!this.events.trigger("beforeBootstrap"))return;t.begin(),t.pushElement(document),t.end(),this.events.trigger("afterBootstrap")};var s=new r;return e.modules.defineRunnable("core.bootstrap",function(){s.run()}),s}e.modules.define("core.bootstrap",t),t.deps=["core.parser","core.event.group"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";e.modules.define("core.event.group",n);var t=e.assert;function n(e){function n(e,t){this._events={},this._context=t,this.extend(e)}return n.prototype.extend=function(e){for(var n=0;n<e.length;n++){var r=e[n];t.ownKeyNotSet(r,this._events,"This event is already defined.",{event:r}),this._events[r]=null}},n.prototype.register=function(t,n,r){this._assertEventDefined(t),null===this._events[t]&&(this._events[t]=e(this._context));this._events[t].register(n,r)},n.prototype.unregister=function(e,t,n){if(this._assertEventDefined(e),null===this._events[e])return;this._events[e].unregister(t,n)},n.prototype.trigger=function(e,t){if(this._assertEventDefined(e),null===this._events[e])return!0;return this._events[e].trigger(t)},n.prototype._assertEventDefined=function(e){t.ownKeySet(e,this._events,"Event is not defined.",{eventName:e})},function(e,t){return new n(e,t)}}n.deps=["core.event"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";e.modules.define("core.event",function(){function t(e){this.namedListeners={},this.unnamedListeners=[],this.context=e,this.afterTriggerCallback=null}return t.prototype.register=function(t,n){e.vars.isFunction(n)?this.registerNamed(t,n):this.unnamedListeners.push(t.bind(this.context))},t.prototype.registerNamed=function(t,n){e.assert.namespaceValid(t),e.assert.keyNotSet(t,this.namedListeners,"Event namespace is already defined."),this.namedListeners[t]=n.bind(this.context)},t.prototype.unregister=function(t){var n=this.unnamedListeners.indexOf(t);e.vars.isFunction(t)&&-1!==n?this.unnamedListeners.splice(n,1):t in this.namedListeners&&delete this.namedListeners[t]},t.prototype.trigger=function(e){for(var t in this.namedListeners)if(this.namedListeners.hasOwnProperty(t)&&!1===this.namedListeners[t](e))return!1;for(var n=0;n<this.unnamedListeners.length;n++)if(!1===this.unnamedListeners[n](e))return!1;return!this.afterTriggerCallback||this.afterTriggerCallback(e)},t.prototype.setAfterTrigger=function(e){this.afterTriggerCallback=e.bind(this.context)},function(e){return new t(e)}})}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(){function t(){this.types={}}return t.prototype.define=function(t,n){e.assert.namespaceValid(t),e.assert.keyNotSet(t,this.types,"This type is already defined."),this.types[t]=n},t.prototype.get=function(t){return e.assert.keySet(t,this.types,"This type is not defined."),this.types[t]},function(){return new t}}e.modules.define("core.manager.base",t),t.deps=[]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t){var n=e.assert,r=e.html;function s(){this._parsers={},this._currentParseStack=[],this._parseStacks=[],this.config={strict:!0,selector:"[data-assign]",dataKey:"assign",assignmentLinesGetter:null},this.events=t(["beforeBeginStack","afterEndStack","beforeParseAll","afterParseAll"],this)}return s.prototype.define=function(e,t,r){n.namespaceValid(e),n.keyNotSet(e,this._parsers,"This parser is already defined."),r||(r=t);r.checker=r.checker||t,this._parsers[e]=r},s.prototype.get=function(e){return n.keySet(e,this._parsers,"Parser is not defined."),this._parsers[e]},s.prototype.compile=function(t,n){var s=n||r.create("compiled"),i=r.parse(s,t);!n&&i.children.length>1&&e.throwError("Compile text must have at least one root element if owner tag is not specified.",{text:t,ownerTag:n});return this.begin(),this.pushElement(i),this.end(),n||i.children[0]},s.prototype.getParseableElements=function(e){return e.querySelectorAll(this.config.selector)},s.prototype.parse=function(t){if(t.$parsed)return;for(var n=this._getAssignLines(t),r=0;r<n.length;r++){var s=!1,i=n[r].trim();for(var o in this._parsers){if(!this._parsers.hasOwnProperty(o))return;var a=this._parsers[o],p=e.vars.isFunction(a.checker)?a.checker(i,t):i.match(a.checker);if(p){s=!0,t.$parsed=!0,a(i,t);break}}!s&&this.config.strict&&e.throwError("Cannot parse assigment!",{assignment:i,assignmentList:n,element:t})}},s.prototype.parseAll=function(e){if(!this.events.trigger("beforeParseAll"))return;for(var t=0;t<e.length;t++)this.parse(e[t]);this.events.trigger("afterParseAll")},s.prototype.begin=function(){this.events.trigger("beforeBeginStack"),this._parseStacks.push(this._currentParseStack),this._currentParseStack=[]},s.prototype.pushElement=function(e){for(var t=this.getParseableElements(e),n=0;n<t.length;n++)t[n].$parsed||this._currentParseStack.push(t[n]);!e.$parsed&&e.dataset&&e.dataset.hasOwnProperty(this.config.dataKey)&&this._currentParseStack.push(e)},s.prototype.end=function(){e.assert.greater(this._parseStacks.length,0,"end() cannot be called before begin()");var t=this._currentParseStack;this._currentParseStack=this._parseStacks.pop(),t.length>0&&this.parseAll(t);this.events.trigger("afterEndStack")},s.prototype._getAssignLines=function(e){if(this.config.assignmentLinesGetter)return this.config.assignmentLinesGetter(e);for(var t=e.dataset,n=Object.keys(t),r=[],s=0;s<n.length;s++)-1!==n[s].indexOf(this.config.dataKey)&&r.push(t[n[s]]);return r},new s}e.modules.define("core.parser",t),t.deps=["core.event.group"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(e,t,n){function r(t){this.owner=null,this._isDestroyable=!0,this.scope=e.make(),this._trackId=t,this._payload=null,this._children={},this._isUnlinked=!1,this._parentContainer=null,this._assignments=null,this.events=n(["beforeLink","afterLink","beforeUnlink","afterUnlink"],this)}this.module.define("core.base",r),r.prototype.process=null,r.prototype.getId=function(){return this._trackId},r.prototype.setPayload=function(e){this._payload=e},r.prototype.getPayload=function(){return this._payload},r.prototype.isUnlinked=function(){return this._isUnlinked},r.prototype.setupAssignments=function(e){this._assignments=e},r.prototype.setParent=function(e){var t=this._parentContainer;t&&(this.scope.setParent(null),t._unsetChild(this),this._parentContainer=null);e&&(e._setChild(this),this.scope.setParent(e.scope),this._parentContainer=e)},r.prototype.getParent=function(){return this._parentContainer},r.prototype.setDestroyable=function(e){this._isDestroyable=e},r.prototype.isDestroyable=function(){return this._isDestroyable},r.prototype.link=function(){this.events.trigger("beforeLink",this._assignments),t.assignToScope(this._assignments,this.scope),this.events.trigger("afterLink")},r.prototype.unlink=function(e){if(this.isUnlinked())return;if(!this.isDestroyable()&&!e)return;this._isUnlinked=!0,this.events.trigger("beforeUnlink"),this.setParent(null),this.scope.destroy(),this.events.trigger("afterUnlink")},r.prototype._unsetChild=function(e){var t=e.getId();t in this._children&&delete this._children[t]},r.prototype._setChild=function(e){this._children[e.getId()]=e}}document.querySelector("script[data-assign-js-core]").$main.modules.extend("core.container.manager",t),t.deps=["core.scope","core.assignments","core.event.group"]}(),function(e){"use strict";function t(e,t,n){function r(){this._trackId=1,this._processableContainers=[],this._pendingContainers=[]}r.prototype=t(),r.prototype.getContainer=function(e){return e.$container||null},r.prototype.getParentContainer=function(e){var t=this.getContainer(e);if(t)return t.getParent();var n=e.parentElement;for(;null!==n;){var r=this.getContainer(n);if(r)return r;n=n.parentElement}return null},r.prototype.wrapElement=function(e,t){var n=this.getParentContainer(e),r=this.create(t);return r.setParent(n),r.owner=e,e.$container=r,r},r.prototype.processDeleted=function(t){for(var n=0;n<t.length;n++){for(var r=t[n],s=e.getParseableElements(r),i=0;i<s.length;i++)o(this.getContainer(s[i]));o(this.getContainer(r))}function o(e){e&&!e.isUnlinked()&&e.unlink()}},r.prototype.create=function(e){var t=this._getNewTrackId(),n=new(this.get(e))(t);this._pendingContainers.push(n),n.process&&this._processableContainers.push(n);return n},r.prototype.processContainers=function(){e.begin();for(var t=0;t<this._processableContainers.length;t++)this._processableContainers[t].process();e.end()},r.prototype._initPendingContainers=function(){for(;this._pendingContainers.length>0;){var e=this._pendingContainers.shift();e.link()}},r.prototype._getNewTrackId=function(){return this._trackId++};var s=new r;return e.events.register("afterParseAll",function(){s._initPendingContainers(),s.processContainers()}),s}document.querySelector("script[data-assign-js-core]").$main.modules.define("core.container.manager",t),t.deps=["core.parser","core.manager.base","core.event.group"]}(),function(e){"use strict";function t(t){var n=this.module,r=e.vars,s=this.module.get("core.base");function i(e){this.super.constructor.call(this,e),this.events.extend(["beforeRender","afterRender"]),this.processable=!0}this.module.define("core.rendered",i),i.prototype=e.vars.extendPrototype(s.prototype,{constructor:i,_isInvalidated:!0,_render:function(){var e=this.getPayload();this.events.trigger("beforeRender"),r.isFunction(e)?e(this.owner,this):r.isObject(e)&&e._render&&e._render(this.owner,this);this._isInvalidated=!1},process:function(){if(!this._isInvalidated)return;this._render(),t.begin(),t.pushElement(this.owner),t.end(),this.events.trigger("afterRender")},invalidate:function(){this._isInvalidated=!0,n.processContainers()},setContents:function(t,r){if(!this.owner)return;var s=e.html.setContents(this.owner,t,r);n.processDeleted(s)}})}e.modules.extend("core.container.manager",t),t.deps=["core.parser"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t){var n=1;function r(){this._trackId=n++,this._items={},this._children={},this._isDestroyed=!1,this._parentScope=null,this.events=t(["itemSet","itemUnset"],this)}r.prototype.set=function(t,n){this._assertNotDestroyed(),e.assert.ownKeyNotSet(t,this._items,"This item is already defined in scope."),this._items[t]=n,this.events.trigger("itemSet",{name:t,item:n})},r.prototype.unset=function(t){this._assertNotDestroyed(),e.assert.keySet(t,this._items,"This item is not defined in scope.");var n=this._items[t];delete this._items[t],this.events.trigger("itemUnset",{name:t,item:n})},r.prototype.assign=function(e,t){if(this._assertNotDestroyed(),this.isOwnerOf(e))return;this.set(e,t)},r.prototype.assignMultiple=function(e){for(var t in this._assertNotDestroyed(),e)e.hasOwnProperty(t)&&this.assign(e[t])},r.prototype.get=function(t){return this._assertNotDestroyed(),e.assert.ownKeySet(t,this._items,"This item is not defined in local scope."),this._items[t]},r.prototype.getGlobal=function(t){return this._assertNotDestroyed(),e.assert.keySet(t,this._items,"This item is not defined in global scope."),this._items[t]},r.prototype.getAll=function(){return e.vars.merge(!1,{},this._items)},r.prototype.setParent=function(e){null===e&&(e=s);this._parentScope&&(this._parentScope._unsetChild(this),this._items.__proto__={});e&&(this._items.__proto__=e._items,e._setChild(this));this._parentScope=e},r.prototype.getParent=function(){return this._assertNotDestroyed(),this._parentScope},r.prototype.getChildren=function(){this._assertNotDestroyed();var e=[];for(var t in this._children)this._children.hasOwnProperty(t)&&e.push(this._children[t]);return e},r.prototype.exists=function(e){return this._assertNotDestroyed(),e in this._items},r.prototype.isOwnerOf=function(e){return this._assertNotDestroyed(),this._items.hasOwnProperty(e)},r.prototype.isRoot=function(){return null===this.getParent()},r.prototype.destroy=function(){if(this.isDestroyed())return;this._parentScope&&this._parentScope._unsetChild(this);this._isDestroyed=!0},r.prototype.isDestroyed=function(){return this._isDestroyed},r.prototype._setChild=function(e){this._assertNotDestroyed(),this._children[e._trackId]=e},r.prototype._unsetChild=function(t){this._assertNotDestroyed(),e.assert.keySet(t._trackId,this._children,"This scope is not defined as a child."),delete this._children[t._trackId]},r.prototype._assertNotDestroyed=function(){this._isDestroyed&&e.throwError("Cannot perform this action on destroyed scope.",{})};var s=new r;return{make:function(){var e=new r;return e.setParent(s),e},rootScope:s}}e.modules.define("core.scope",t),t.deps=["core.event.group"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t,n,r){this.module.define("core.component.base",i,null);var s=e.vars;function i(){}i.prototype.owner=null,i.prototype.isComponent=!0,i.prototype.container=null,i.prototype.template=null,i.prototype.initialize=null,i.prototype.destroy=null,i.prototype.afterInit=null,i.prototype.compRefAdded=null,i.prototype.compRefRemoved=null,i.prototype._templateElement=null,i.prototype._render=function(t){if(!this.template||this._templateElement)return;this._templateElement=e.html.wrapRawHtml(this.template),this.container.setContents(this._templateElement)},i.prototype.invalidate=function(){this.container.invalidate()},i.prototype.setup=function(e,t){this.config=e,this.props=n(this),this.container=t,this.owner=t.owner,this.scope=t.scope,this.destroy&&this.container.events.register("beforeUnlink",this.destroy.bind(this));this.afterInit&&this.container.events.register("afterRender",this.afterInit.bind(this));this._setupCompRefs()},i.prototype._setupCompRefs=function(){var e={},t=this.compRefAdded?this.compRefAdded.bind(this):null,n=this.compRefRemoved?this.compRefRemoved.bind(this):null;this.compRefs=e,this.scope.events.register("itemSet",function(n){var r=s.isFunction(n.item.getPayload)?n.item.getPayload():null;r&&r.isComponent&&(e[n.name]=r,t&&t({name:n.name,component:r}))}),this.scope.events.register("itemUnset",function(t){if(e.hasOwnProperty(t.name)){var r=e[t.name];delete e[t.name],n&&n({name:t.name,component:r})}})}}e.modules.extend("core.components",t),t.deps=["core.parser","core.components.props","core.scope"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t,n,r){this.module;var s=e.assert,i=e.vars,o=e.html,a=/^([_a-zA-Z0-9]*)(\@|\#)([^()\ ]+)(\(.*?\))?(\s+\<\>\s+([a-zA-Z0-9]+|\[[a-zA-Z0-9-]*\]|\$)?(\:([a-zA-Z0-9]+|\[[a-zA-Z0-9-]*\]|\$))?)?$/,p=/^\((.*?)\)$/,c="checked";function u(){this.config={container:"core.rendered",checkableTypes:["checkbox","radio"]}}u.prototype=e.vars.extendPrototype(n(),{parseStringDef:function(e,t){var n=e.split(a);s.identical(n.length,10,"Cannot parse tracked property. Invalid syntax.",{line:e,parts:n});var r={trackType:"@"===n[2]?"property":"event",bindEvent:n[1]||null,name:n[3],readFrom:null,writeTo:null},i=n[4];r.type=i?"function":"property";var c=[];"function"===r.type&&(c=n[4].split(p)[1].split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0}));r.arguments=c,n[6]&&(r.readFrom=n[6]);n[8]&&(r.writeTo=n[8]);var u=-1!==this.config.checkableTypes.indexOf(t.type);null===r.readFrom&&("event"===r.trackType?r.readFrom="[]":o.isInputElement(t)?r.readFrom=u?"checked":"value":r.readFrom="html");null===r.writeTo&&("event"===r.trackType?r.writeTo="$":o.isInputElement(t)?r.writeTo=u?"checked":"value":r.writeTo="html");return r},trackProperty:function(e,t){var n=this.parseStringDef(e,t),a=!0,p="function"===n.type,u=r.wrapElement(t,this.config.container),l=u.getParent(),h=u.scope;s.notIdentical(l,null,"Parent must be defined.",{line:e,element:t,parent:l}),u.scope=l.scope;var f=l.getPayload().props;u.setPayload(v),v.props=f,f.events.register("created",d),f.events.register("deleted",y),f.events.register("changed",g),l.events.register("beforeUnlink",function(){u.unlink()}),u.events.register("beforeUnlink",function(){u.scope=h,f.events.unregister("created",d),f.events.unregister("deleted",y)}),n.bindEvent&&t.addEventListener(n.bindEvent,function(e){if("$"!==n.readFrom)if(n.readFrom!==c||"checkbox"!==t.type||t.checked)if(p){var r=f.get(n.name,"");i.isFunction(r)&&r.apply(f.owner,[e].concat(_()))}else{var s=o.getContents(t,n.readFrom);"[]"!==n.readFrom&&f.set(n.name,s)}else f.set(n.name,"")});function d(e){m(e)&&!a&&(f.events.register("changed",g),a=!0)}function y(e){m(e)&&(f.events.unregister("changed",g),a=!1)}function g(e){a&&(p||m(e))&&u.invalidate()}function m(e){switch(e.type){case"single":return e.prop===n.name;case"multiple":return e.props.hasOwnProperty(n.name)}return!1}function v(e){if("$"!==n.writeTo){var t=f.get(n.name,"");p&&i.isFunction(t)&&(t=t.apply(f.owner,_())),"[]"!==n.writeTo&&(n.writeTo===c?e.checked=e.value===t:u.setContents(t,n.writeTo))}}function _(){var e=f.getMultiple(n.arguments,null);return n.arguments.map(function(t){return"%"===t[0]?o.getContents(u.owner,t.substr(1)):e[t]})}}});var l=new u;return t.define("core.component.property",a,l.trackProperty.bind(l)),l}e.modules.extend("core.container.manager",t),t.deps=["core.parser","core.manager.base","core.container.manager"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t,n,r,s,i){var o=e.assert,a=/^([a-zA-Z0-9_\.-]+)(:([a-zA-Z_][a-zA-Z0-9]+))?(\s*(\<\-.*?))?$/;function p(){this.config={container:"core.rendered",baseComponent:"core.component.base"}}p.prototype=e.vars.extendPrototype(n(),{define:function(t,n,r){if(null!==r){var s=e.vars.defaultValue(r,this.config.baseComponent);n.prototype=e.vars.extendPrototype(this.get(s).prototype,n.prototype)}this.super.define.call(this,t,n)},parseStringDef:function(e){var t=e.split(a);return o.identical(t.length,7,"Cannot parse component assignment. Invalid property syntax.",{line:e,parts:t}),{type:t[1],referenceAs:t[3]?t[3]:null,assignments:t[4]?i.parse(t[4]):null}},makeComponent:function(e,n){var r=t.wrapElement(e,this.config.container);!r.getParent()&&n.parent&&r.setParent(n.parent.container);var s=r.getParent(),i=r.scope,o=new(this.get(n.type));o.setup(n,r),!1===n.destroyable&&r.setDestroyable(!1);if(r.setPayload(o),r.setupAssignments(n.assignments),n.referenceAs){var a=i.getParent();a&&a.set(n.referenceAs,r),i.set(n.referenceAs,r)}r.events.register("afterLink",function(){o.initialize&&o.initialize()}),r.events.register("beforeUnlink",function(){if(n.referenceAs){var e=i.getParent();e&&e.unset(n.referenceAs)}}),s&&s.events.register("beforeUnlink",function(){r.unlink()});return o}});var c=new p;return r.define("core.component",a,function(e,t){var n=c.parseStringDef(e);c.makeComponent(t,n)}),c}e.modules.define("core.components",t),t.deps=["core.container.manager","core.manager.base","core.parser","core.event","core.assignments"],e.alias.set("defineComponent",function(t,n){e.modules.extend("core.components",function(){this.module.define(t,n)})})}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t){function n(e){this.owner=e,this._props={},this.events=t(["created","changed","deleted"],this),this.array={push:this._pushArrayValue.bind(this),pop:this._popArrayValue.bind(this),insert:this._insertArrayValue.bind(this),replace:this._replaceArrayValue.bind(this),delete:this._deleteArrayValue.bind(this)}}n.prototype.set=function(e,t){r.notIdentical(e[0],"%","Props cannot start with % sign."),this.exists(e)||this.events.trigger("created",{type:"single",prop:e,value:t});this._props[e]=t,this.refresh(e)},n.prototype.delete=function(e){if(!this.exists(e))return;var t=this.get(e);delete this._props[e],this.events.trigger("deleted",{type:"single",prop:e,value:t}),this.refreshProperty(e)},n.prototype.deleteMultiple=function(e){for(var t={},n=0;n<e.length;n++)if(this.exists(prop)){var r=this._props[n];delete this._props[e[n]],t[e[n]]=r}this.events.trigger("deleted",{type:"multiple",props:t}),this.refreshMultiple(t)},n.prototype.deleteAll=function(){this.deleteMultiple(this._props)},n.prototype.exists=function(e){return this._props.hasOwnProperty(e)},n.prototype.refresh=function(e){this.events.trigger("changed",{type:"single",prop:e,value:this.get(e,null)})},n.prototype.refreshAll=function(){this.refreshMultiple(this._props)},n.prototype.refreshMultiple=function(e){this.events.trigger("changed",{type:"multiple",props:e})},n.prototype.get=function(e,t){return this.exists(e)?this._props[e]:t},n.prototype.getMultiple=function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=this.get(e[r],t);return n},n.prototype.setMultiple=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(this._props[n]=t[n]=e[n]);this.refreshMultiple(t)},n.prototype._pushArrayValue=function(e,t){var n=this.get(e);r.isArray(n,"This property must be an array."),n.push(t),this.refresh(e)},n.prototype._popArrayValue=function(e,t){var n=this.get(e);r.isArray(n,"This property must be an array.");var t=n.pop(t);return this.refresh(e),t},n.prototype._insertArrayValue=function(e,t,n){var s=this.get(e);r.isArray(s,"This property must be an array."),s.splice(t,0,n),this.refresh(e)},n.prototype._replaceArrayValue=function(e,t,n){var s=this.get(e);r.isArray(s,"This property must be an array."),s.splice(t,1,n),this.refresh(e)},n.prototype._deleteArrayValue=function(e,t){var n=this.get(e);r.isArray(n,"This property must be an array."),n.splice(t,1),this.refresh(e)};var r=e.assert;return function(e){return new n(e)}}e.modules.define("core.components.props",t),t.deps=["core.event.group"]}(document.querySelector("script[data-assign-js-core]").$main),function(e){"use strict";function t(t,n,r){this.module;var s=e.assert,i=(e.vars,/^\s*:([a-zA-Z_][a-zA-Z0-9]+)$/);function o(){this.config={container:"core.base"}}o.prototype=e.vars.extendPrototype(n(),{parseStringDef:function(e){var t=e.split(i);return s.identical(t.length,3,"Cannot parse tracked property. Invalid syntax.",{line:e,parts:t}),{scopeName:t[1]}},scopeProperty:function(e,t){var n=this.parseStringDef(e),s=r.wrapElement(t,this.config.container),i=s.getParent();s.scope.getParent().set(n.scopeName,t),i&&(s.events.register("beforeUnlink",function(){i.scope.unset(n.scopeName)}),i.events.register("beforeUnlink",function(){s.unlink()}))}});var a=new o;return t.define("core.component.scope.property",i,a.scopeProperty.bind(a)),a}e.modules.extend("core.container.manager",t),t.deps=["core.parser","core.manager.base","core.container.manager"]}(document.querySelector("script[data-assign-js-core]").$main);